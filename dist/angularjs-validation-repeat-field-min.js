!function(e,r){"object"==typeof exports?module.exports=r(e,require("angular")):"function"==typeof define&&define.amd?define(["angular"],function(i){return e.validationRepeatField=r(e,i)}):e.validationRepeatField=r(e,e.angular)}(this,function(e,r){var i=r.module("ValidationRepeatField",[]);return i.directive("validateRepeatField",["validateRepeatFieldConfig",function(e){function r(e){return a.indexOf(e)>-1}function i(e){if(!e.name)throw new Error("validateRepeatField: Name attribute should be specified");if(!e.role)throw new Error("validateRepeatField: role attribute should be specified")}var t=e.getErrorName(),a=["master","slave"];return{restrict:"A",require:"ngModel",link:function(e,a,n,o){var l="form";if("undefined"!=typeof n.form&&(l=n.form),"undefined"==typeof e[l])throw new Error("validateRepeatField: can not find form element");if(i(n),!r(n.role))throw new Error("validateRepeatField: You can not use roles different from master and slave");o.$parsers.unshift(function(r){isValid=!0;var i,a="master"===n.role,l=e.form[n.validateRepeatField];return l.$viewValue&&(i=l.$viewValue.trim()),r&&r.length>0&&i&&i.length>0&&(isValid=r===i),a?l.$setValidity(t,isValid):(o.$setValidity(t,isValid),"undefined"==typeof i&&(l.$setValidity("required",!1),l.$setViewValue(l.$viewValue))),r})}}}]),i.provider("validateRepeatFieldConfig",function(){function e(e){i.errorName=e}function r(){return i.errorName}var i={errorName:"equalFieldValue"};return{setErrorName:e,$get:function(){return{getErrorName:r}}}}),i});